/******************************************************************************************/
/*                               C O M S T . C P P                                                 */
/*   Дефиниране на общи глобални променливи при работа с "DISP"       */
/******************************************************************************************/
#include <new.h>
#include "c:\msvc\dani\include\comv.h"
#include "c:\msvc\dani\include\classth.h"
#include "c:\msvc\dani\include\vfield.h"
#include "c:\msvc\dani\include\key.h"
#include "c:\msvc\dani\include\stfile.h"
#include "c:\msvc\dani\include\pia.h"
#include "c:\msvc\dani\include\table.h"
                                     
TaskHandle *kboard,*screen,*idle,*inpi ;//задачи  на "DISP" -"Keyboard","Screen","Idle"
int activpage=0;//видеостраница на активното изображение
flag flagend=TRUE;  /* флаг за край на задачите на диспечера */
flag flag_change=TRUE;// флаг за избор на нова задача
StateList READYF,READYS,WAIT,DELAY,SUSPEND; /* списъци със задачи по групи */
TaskHandle *CURTASK; /* текуща задача,изпълнявана от диспечера */

//byte tsemm[8000];
byte  tsem[3200];  /* таблица на семафорите */
unsigned size; /* размер на заетата памет */
unsigned numbls=0;//брой логически семафори
unsigned numbas=0;// брой аритметични семафори
unsigned numbts=0;//брой семафори за време
unsigned numbis=0; //семафори-вход   
unsigned numbirq=0;//номер на прекъсване използвано от DISP
ListVF *activ; /* указател към активното изображение в текущия режим */
ListVF lfunc;/* списък на полетата на функционалните клавиши */ 
ListVF lfunc1;/* списък на полетата на функционалните клавиши */ 
KeyBuffer *infbuffer; /* указател буфер с ASCII кодове */
KeyBuffer *kb;  /* указател буфер с позиционни кодове */
ListKey *dk; /* списък  функционални клавиши в активния режим*/
Key **aKey; /* активен функционален клавиш */
char * Inpos;/* таблица с информация POS код- значение */
char **wASCII ;/* указател към указателя на входно-изходното поле в текущия режим */
 byte *col=NULL;//указател към текущото отместване от началото на входно/изходно поле 
int *hr; /* указател към активния хоризонтален ред */
int *wr; /* указател към активната вертикална колона */
flag flag_wait=FALSE;//флаг за изчакване извикването на "DISP"
int *posl=0; /* позиция на най-левия функц.клавиш */
int *post=0;/* позиция на реда функц.клавиши */
int posa=0; /* позиция на избрания функционален клавиш */
int posm; // относително положение на марк. курсор - за отбелязване на изходните полета
int adrescom;//адрес на асинхронния адаптер COM1(0x3F8-0x3FF),COM2(0x2F8-0x2FF)
 TC ExitSys;//укзател към функция з аизход опт системата          
 TC Ini;//указател към функция за инициализация
TC PrintEnterFields;//указател към функция за дисплей на входно/изходно поле
TC PrintExitFields; //указател към функция за дисплей на изходни полета
TC PrintUserFields;//указател към потребителска  функция за дисплей на изходни полета
TC MKTop;//указател към функция за движение нагоре 
TC MKBottom;//указател към функция за движение надолу
TC MKInsert; //указател към функция за вмъкване
TC MKHome;//указател към функция "HOME"
TC MKPgUp;//указател към функция за движение "страница-нагоре"
TC MKPgDn;//указател към функция за движение "страница-надолу"
TC MKDel;//указател към функция за изтриване
TC MKRight;//указател към функция за движение надясно
TC MKLeft;  //указател към функция за движение наляво
TC F12;//указател към функция F12
TC F10;//указател към функция F10
TC F11;//указател към функция F11
TC F9;//указател към функция F9
TC F8;//указател към функция F8
TC ESC;//указател към функция ESC
TC CRFUNC=NULL; /* указател към функцията на CR */
TC CRFUNCOLD=NULL; /* указател към прдходна функция на CR */
 TC WorkingInput; //указател към функция за обработка на входовете
TC EndUseFunc;//указател към потребителска функция за край  
TC PrintUseFunc;//указател към потребителсака функция за дисплей
TC UseSemafor;//указател към потребителсака функция за обработка на семафорите
ListVF vidnode; //списък на постоянните текстови полета в екран TABLE
